function initiate(){modifyView(),$("#myModal2").on("shown.bs.modal",function(e){$(".radioHasNoStream").trigger("click")}),$("#myModal").on("shown.bs.modal",function(e){for(var t="",n=activeYosElement.getElementsByTagName("sec"),a=0;a<n.length;a++){if("-"==n[a]){t="<option>No stream</option";break}t+="<option>"+n[a].getAttribute("stream")+"</option>"}document.getElementById("strmSelect").innerHTML=t}),$("#myModal5").on("shown.bs.modal",function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText;document.getElementById("dptSelect").innerHTML=e}};var n="requestType="+XHTTP_REQUEST_TYPE_GETDEPARTMENTS;t.open("POST","datamodel/xhttpHandler.php"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n)}),$("#myModal10").on("shown.bs.modal",function(e){showInstructorsList()}),$("#myModal11").on("shown.bs.modal",function(e){showCoursesList()}),$("#myModal12").on("shown.bs.modal",function(e){showClassInfo()}),$("#myModal3").on("shown.bs.modal",function(e){$("#uName").attr("readonly",!1),$("#pWord").attr("readonly",!1)})}function requestXML(e){if("undefined"!=typeof e&&""!=e)try{var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText;parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml"),setActiveDepartment(xmlDoc.documentElement.getAttribute("value")),showSchedule("1","-","1","monday","1","-1"),constructView(xmlDoc)}else 404==t.status&&(document.getElementById("room").placeholder="file Not found");closeHoldon()};var n="requestType="+XHTTP_REQUEST_TYPE_DPTSCHEDULE+"&dpt="+e;user.userDepartment==USER_TYPE_NORMAL?(t.open("GET","datamodel/xhttpHandler.php?"+n,!0),t.send()):(t.open("POST","datamodel/xhttpHandler.php"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n)),openHoldon()}catch(a){window.alert("error"+a.message)}}function showSchedule(e,t,n,a,o,r){var s,d,i,l,c="undefined",u="undifined",m="undifined";s="-1"==e?activeYosElement:getYosElement(e),d="-1"==n?activeSecElement:getSecElement(s,t,n,r),i="-1"==n&&"-1"==a?activeDayElement:getDayElement(d,a,r),l=getPrdElement(i,o,r),"undefined"!=typeof l&&(c=l.getElementsByTagName("cName")[0].childNodes[0].nodeValue,u=l.getElementsByTagName("iName")[0].childNodes[0].nodeValue,m=l.getElementsByTagName("room")[0].childNodes[0].nodeValue),document.getElementById("courseName").value=c.replace(":","&"),document.getElementById("instructorName").value=u.replace(":","&"),document.getElementById("room").value=m.replace(":","&")}function getYosElement(e){for(var t=xmlDoc.getElementsByTagName("yos"),n=t.length-1;n>=0;n--)if(t[n].getAttribute("value")==e)return setActiveYosElement(t[n]),t[n]}function getSecElement(e,t,n,a){if("undefined"==typeof e)return void window.alert("undefined yos");for(var o=e.getElementsByTagName("sec"),r=o.length-1;r>=0;r--)if(o[r].getAttribute("value")==n&&o[r].getAttribute("stream")==t)return setActiveSecElement(o[r],a),o[r]}function getDayElement(e,t,n){if("undefined"==typeof e)return void window.alert("getDayElementundefined sec");"-1"==t&&(t=activeDayElement.getAttribute("value"),n="-1");for(var a=e.getElementsByTagName("day"),o=a.length-1;o>=0;o--)if(a[o].getAttribute("value")==t)return setActiveDayElement(a[o],n),a[o]}function getPrdElement(e,t,n){if("undefined"==typeof e)return void 0;"-1"==t&&(t=activePrdElement.getAttribute("value"),n="-1");for(var a=e.getElementsByTagName("period"),o=a.length-1;o>=0;o--)if(a[o].getAttribute("value")==t)return setActivePrdElement(a[o],n),a[o]}function setActiveYosElement(e){activeYosElement=e,$("#bcYos").text(activeYosElement.getAttribute("value"))}function setActiveSecElement(e,t){if("-1"==t){var n=typeof activeSecElement;if("undefined"==n);else{for(var a=activeYosElement.getAttribute("value"),o=activeYosElement.getElementsByTagName("sec"),r=0;r<o.length;r++){var s=o[r].getAttribute("stream"),d=o[r].getAttribute("value"),i="sec_"+d+"_yos_"+a+"_strm_"+s;$("#"+i).removeClass("active")}var s=o[0].getAttribute("stream"),l="sec_1_yos_"+a+"_strm_"+s;$("#"+l).addClass("active")}}else $(document).ready(function(){var e=activeYosElement.getAttribute("value"),n=activeSecElement.getAttribute("value"),a=activeSecElement.getAttribute("stream"),o="sec_"+n+"_yos_"+e+"_strm_"+a;$("#"+o).removeClass("active"),$(t).addClass("active")});activeSecElement=e,$("#bcSec").text(activeSecElement.getAttribute("stream")+"Sec-"+activeSecElement.getAttribute("value"))}function setActiveDayElement(e,t){activeDayElement=e,$("#bcDay").text(activeDayElement.getAttribute("value")),"-1"!=t&&$(document).ready(function(){$("#activeDayTab").removeClass("active"),$("#activeDayTab").attr("id"," "),$(t).addClass("active"),$(t).attr("id","activeDayTab")})}function setActivePrdElement(e,t){if("undefined"!=typeof activePrdElement&&user.userType==USER_TYPE_SCHEDULER){var n=$("#courseName").val().replace("&",":"),a=$("#instructorName").val().replace("&",":"),o=$("#room").val().replace("&",":"),r="Do you want to save changes you made?",s=activePrdElement.getElementsByTagName("cName")[0].childNodes[0].nodeValue,d=activePrdElement.getElementsByTagName("iName")[0].childNodes[0].nodeValue,i=activePrdElement.getElementsByTagName("room")[0].childNodes[0].nodeValue;if(n!=s||a!=d||o!=i){var l=window.confirm(r);1==l&&$(".saveSchedule").trigger("click")}}activePrdElement=e;var c=activePrdElement.getAttribute("value");$("#bcPrd").text(c),"1"==c?$("#bcprdTime").text(PERIOD_1_T):"2"==c?$("#bcprdTime").text(PERIOD_2_T):$("#bcprdTime").text(PERIOD_3_T),"-1"!=t&&$(document).ready(function(){$("#activePrdTab").removeClass("active"),$("#activePrdTab").attr("id"," "),$(t).addClass("active"),$(t).attr("id","activePrdTab")})}function setActiveDepartment(e){activeDepartment=e,$(document).ready(function(){$("#departments").val(activeDepartment)})}function constructView(e){for(var t=e.getElementsByTagName("yos"),n=0;n<t.length;n++){var a=t[n];if(n>0){var o=document.getElementById("panelYR1");constructYrPanel(o,a)}for(var r=a.getElementsByTagName("sec"),s=0;s<r.length;s++){var d=r[s];(0!=s||0!=n)&&constructSecView(a,d)}}}function constructYrPanel(e,t){var n=$(e).clone(),a=t.getAttribute("value"),o="panelYR"+a;$(n).attr("id",o);var r="headingYR"+a,s="collapseYR"+a,d=$(n).children(),i=d[0];$(i).attr("id",r);var l=$($(i).children()[0]).children()[0],c=t.getElementsByTagName("sec")[0].getAttribute("stream"),u="showSchedule('"+a+"','"+c+"','1','-1','-1','-1')";$(l).attr("onclick",u),$(l).attr("href","#"+s),$(l).text("YEAR-"+a);var m=d[1];$(m).attr("id",s),$(m).removeClass("in");var p=$($(m).children()[0]).children()[0];$(p).attr("id","ul_li_yr_"+a),$(p).empty(),$($($(e).parent()).last()).append(n)}function constructSecView(e,t){var n=e.getAttribute("value"),a="ul_li_yr_"+n,o=$("#"+a).last(),r=t.getAttribute("value"),s=t.getAttribute("stream"),d="sec_"+r+"_yos_"+n+"_strm_"+s,i="showSchedule('"+n+"','"+s+"','"+r+"','-1','-1',this)",l="#workingSpace",c="<li id='"+d+"' onclick="+i+"><a href='"+l+"'>"+s+" SEC-"+r+" </a></li> ";$(o).append(c)}function addNewYos(e,t,n){var a=document.getElementById("yosv");if(0==a.checkValidity())return void window.alert(a.validationMessage);for(var o=xmlDoc.documentElement.getElementsByTagName("yos"),r=0;r<o.length;r++){var s=o[r].getAttribute("value");if(s==e)return void window.alert("The year of study already exists.")}try{var d,i=!1;if("has stream"==n){if(i=!0,""==t)return void window.alert("please give the name of streams");d=t.split(",")}else"has no stream"==n&&(i=!1);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4==l.readyState&&200==l.status){var t=l.responseXML,n=t.documentElement.cloneNode(!0);n.setAttribute("value",e);var a=document.getElementById("panelYR1");if(i)for(var o=0;o<d.length;o++)if(0==o)n.getElementsByTagName("sec")[0].setAttribute("stream",d[o]),constructYrPanel(a,n),constructSecView(n,n.getElementsByTagName("sec")[0]);else{var r=n.getElementsByTagName("sec")[0].cloneNode(!0);r.setAttribute("stream",d[o]),constructSecView(n,r),n.appendChild(r)}else{constructYrPanel(a,n);var s=n.getElementsByTagName("sec")[0];constructSecView(n,s)}xmlDoc.documentElement.appendChild(n),madeChanges=!0,closeHoldon()}else 404==l.status&&window.alert("Yossample model file Not found")},l.open("GET","datamodel/yosModel.xml",!0),l.send(),openHoldon()}catch(c){window.alert("error"+c.message)}}function addNewSec(e,t){var n=document.getElementById("secv");if(0==n.checkValidity())return void window.alert(n.validationMessage);try{var a;if("undefined"==typeof activeYosElement)return void window.alert("Error undefined activeYosElement on adding new sec");a=activeYosElement;for(var o=a.getElementsByTagName("sec"),r=0;r<o.length;r++){var s=o[r].getAttribute("value"),d=o[r].getAttribute("stream");if(s==e&&d==t)return void window.alert("The section already exists.")}var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){madeChanges=!0;var n=i.responseXML,o=n.getElementsByTagName("sec")[0].cloneNode(!0);o.setAttribute("value",e),o.setAttribute("stream",t),a.appendChild(o),constructSecView(a,o),closeHoldon()}else 404==i.status&&window.alert("Yossample model file Not found")},i.open("GET","datamodel/yosModel.xml",!0),i.send(),openHoldon()}catch(l){window.alert("error"+l.message)}}function addNewPeriod(e,t,n){var a=document.getElementById("courseName"),o=document.getElementById("instructorName");return 0==a.checkValidity()?void $("#txtHint").text(a.validationMessage):0==o.checkValidity()?void $("#txtHint2").text(o.validationMessage):e.search(":")>=0||t.search(":")>=0||n.search(":")>=0?void $("#txtHint").text("':' not allowed "):(("undefined"==typeof n||""==n)&&(n="None"),e=e.replace("&",":"),t=t.replace("&",":"),n=n.replace("&",":"),void(null!=e&&""!=e&&(activePrdElement.getElementsByTagName("cName")[0].childNodes[0].nodeValue=e,null!=t&&""!=t&&(activePrdElement.getElementsByTagName("iName")[0].childNodes[0].nodeValue=t),null!=n&&""!=n&&(activePrdElement.getElementsByTagName("room")[0].childNodes[0].nodeValue=n),madeChanges=!0,window.alert("Period saved succesfully"))))}function saveChanges(){try{var e=(new XMLSerializer).serializeToString(xmlDoc),t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status?("true"==t.responseText?(madeChanges=!1,window.alert("Change Saved succesfully!")):window.alert("Change not saved: "+t.responseText),closeHoldon()):404==t.status&&window.alert("xml file Not found")};var n="data="+e+"&dpt="+user.userDepartment;t.open("POST","datamodel/updateDataModel.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n),openHoldon()}catch(a){window.alert("error"+a.message)}}function showHint(e,t){if(0==e.length)return void(document.getElementById("txtHint").innerHTML="");e.search("&")>0&&(e=e.slice(e.search("&")+1),e=e.trim());var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(document.getElementById("txtHint").innerHTML=n.responseText)};var a=1;"undefined"!=typeof activeYosElement&&(a=activeYosElement.getAttribute("value")),n.open("GET","datamodel/gethint.php?key="+e+"&dpt="+activeDepartment+"&yos="+a+"&hintfor="+t,!0),n.send()}function setHint(e){var t=document.getElementById("courseName").value;t.search("&")>0?document.getElementById("courseName").value=t.slice(0,t.search("&")+1)+" "+e.innerHTML:document.getElementById("courseName").value=e.innerHTML,document.getElementById("txtHint").innerHTML=""}function showHint2(e,t){if(0==e.length)return void(document.getElementById("txtHint2").innerHTML="");e.search("&")>0&&(e=e.slice(e.search("&")+1),e=e.trim());var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(document.getElementById("txtHint2").innerHTML=n.responseText)};var a=1;"undefined"!=typeof activeYosElement&&(a=activeYosElement.getAttribute("value")),n.open("GET","datamodel/gethint.php?key="+e+"&dpt="+activeDepartment+"&yos="+a+"&hintfor="+t,!0),n.send()}function setHint2(e){var t=document.getElementById("instructorName").value;t.search("&")>0?document.getElementById("instructorName").value=t.slice(0,t.search("&")+1)+"  "+e.innerHTML:document.getElementById("instructorName").value=e.innerHTML,document.getElementById("txtHint2").innerHTML=""}function modal2InputChanged(e){var t="hasStream";e.checked&&"has stream"==e.value||(t="hasnostream"),"hasnostream"==t?$("#strmNamesDiv").addClass("hidden"):$("#strmNamesDiv").removeClass("hidden")}function modifyView(){try{var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.responseText,n=t.split(",");if(user.userName=n[0],user.userDepartment=n[2],user.userType!=n[1])switch(user.userType=Number(n[1]),user.userType){case USER_TYPE_NORMAL:viewForNormalUser();break;case USER_TYPE_SCHEDULER:viewForSchedulerUser();break;case USER_TYPE_ADMIN:viewForAdminUser()}requestXML(user.userDepartment),closeHoldon()}},e.open("POST","datamodel/xhttpHandler.php"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("requestType="+XHTTP_REQUEST_TYPE_USERINFO),openHoldon()}catch(t){window.alert("Error:modifyView => "+t.message)}}function viewForNormalUser(){$(document).ready(function(){$(".prv1,.prv2").addClass("hidden"),$("input").attr("readonly",!0),$("#logout").attr("disabled",!0),$("#login").attr("disabled",!1),$("#changePw").attr("disabled",!0),$("#editIns").attr("disabled",!0),$("#editCors").attr("disabled",!0),$("#departments").attr("disabled",!1),populateDepartmentsList()})}function populateDepartmentsList(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.responseText;document.getElementById("departments").innerHTML=t,setActiveDepartment(user.userDepartment),closeHoldon()}};var t="requestType="+XHTTP_REQUEST_TYPE_GETDEPARTMENTS;e.open("POST","datamodel/xhttpHandler.php"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),openHoldon()}function viewForSchedulerUser(){$(document).ready(function(){$(".prv1").addClass("hidden"),$(".prv2,.prv3").removeClass("hidden"),$("input").attr("readonly",!1),$("#login").attr("disabled",!0),$("#logout").attr("disabled",!1),$("#changePw").attr("disabled",!1),$("#editIns").attr("disabled",!1),$("#editCors").attr("disabled",!1),$("#departments").attr("disabled",!0),populateDepartmentsList()})}function viewForAdminUser(){$(document).ready(function(){$(".prv2,.prv3").addClass("hidden"),$(".prv1").removeClass("hidden"),showUsers(),showDepartments()})}function login(e,t){try{var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;"true"==e?(window.location.reload(),$("#myModal3").modal("hide")):($("#loginStatus").text("Wrong username & password!"),$("#loginStatus").css("color","#FF0000")),closeHoldon()}};var a="requestType="+XHTTP_REQUEST_TYPE_AUTHENTICATE+"&un="+e+"&pd="+t;n.open("POST","datamodel/xhttpHandler.php"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a),openHoldon()}catch(o){window.alert("Error:login => "+o.message)}}function logout(){if(madeChanges){var e=window.confirm("Do you want to save changes you made?");e&&saveChanges()}try{var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText;"true"==e&&window.location.reload()}};var n="requestType="+XHTTP_REQUEST_TYPE_LOGOUT;t.open("POST","datamodel/xhttpHandler.php"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n)}catch(a){window.alert("Error:logout => "+a.message)}}function selectDepartment(e){try{var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseText;"true"==e&&window.location.reload(),closeHoldon()}};var n="requestType="+XHTTP_REQUEST_TYPE_SELECTDEPARTMENT+"&dpt="+e;t.open("POST","datamodel/xhttpHandler.php"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n),openHoldon()}catch(a){window.alert("Error:logout => "+a.message)}}function changeMyPword(e,t){if("undefined"==typeof e||""==e||"undefined"==typeof t||""==t)return void window.alert("Wrong Input please fill all the fields correctly.");var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;"true"==e?($("#myModal9").modal("hide"),$("#myModal4").modal("hide"),window.alert("Your password is changed to "+t)):window.alert("Operation is not completed. please insert your old password correctly."),closeHoldon()}};var a="requestType="+XHTTP_REQUEST_TYPE_CHANGEPW+"&opw="+e+"&npw="+t;n.open("POST","datamodel/xhttpHandler.php"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a),openHoldon()}function showUsers(){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){for(var t=e.responseText,t=t.substr(0,t.length-1),n=t.split(","),a="",o=0;o<n.length;o++){var r=n[o].slice(0,n[o].indexOf(":")),s=n[o].slice(n[o].indexOf(":")+1),d="";0==o&&(d="active",selectedUser=r);var i="<li class='"+d+"' id='"+r+"' onclick='userSelected(this)'><a>"+r+" / "+s+"</a></li>";a+=i}$(document).ready(function(){$("#usersList").html(a)}),closeHoldon()}};var t="requestType="+XHTTP_REQUEST_TYPE_GETUSERS;e.open("POST","datamodel/xhttpHandler.php"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),openHoldon()}function showDepartments(){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){for(var t=e.responseText,t=t.substr(0,t.length-1),n=t.split(","),a="",o=0;o<n.length;o++){var r="";0==o&&(r="active",selectedDpt=n[o]);var s="<li class='"+r+"' id='"+n[o]+"' onclick='dptSelected(this)'><a>"+n[o]+"</a></li>";a+=s}$(document).ready(function(){$("#departmentsListAdmin").html(a)}),closeHoldon()}};var t="requestType="+XHTTP_REQUEST_TYPE_GETDEPARTMENTS_FORADMIN;e.open("POST","datamodel/xhttpHandler.php"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),openHoldon()}function addNewUser(e,t){var n=document.getElementById("un");if(0==n.checkValidity)return void $("#un").attr("placeholder",n.validationMessage);if(""==e)return void $("#un").attr("placeholder","Fill the field please");if(!/[a-zA-z0-9_]/.test(e))return $("#un").val(""),void $("#un").attr("placeholder","user name cannot contain special characters!");var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=a.responseText;"true"==e?(window.alert("new user added succesfully!"),document.location.reload()):window.alert("user name already exists."),closeHoldon()}};var o="requestType="+XHTTP_REQUEST_TYPE_ADDUSER+"&un="+e+"&dpt="+t;a.open("POST","datamodel/xhttpHandler.php"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(o),openHoldon()}function addNewDepartment(e){var t=document.getElementById("dn");if(0==t.checkValidity)return $("#dn").val(""),void $("#dn").attr("placeholder",t.validationMessage);if(!/[a-zA-z0-9\-_]/.test(e))return $("#dn").val(""),void $("#dn").attr("placeholder","department name cannot contain special characters");if(""==e)return void $("#dn").attr("placeholder","please fill this filled");e=e.trim();var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;"true"==e?(window.alert("new Department added succesfully!"),document.location.reload()):"false"==e?window.alert("Department name already exists."):window.alert("Error Adding new dpt:"+e),closeHoldon()}};var a="requestType="+XHTTP_REQUEST_TYPE_ADDDEPARTMENT+"&dpt="+e;n.open("POST","datamodel/xhttpHandler.php"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a),openHoldon()}function userSelected(e){"undefined"!=typeof selectedUser&&""!=selectedUser&&$("#"+selectedUser).removeClass("active"),selectedUser=$(e).attr("id"),$(e).addClass("active")}function dptSelected(e){"undefined"!=typeof selectedDpt&&""!=selectedDpt&&$("#"+selectedDpt).removeClass("active"),selectedDpt=$(e).attr("id"),$(e).addClass("active")}function removeSelectedUser(){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.responseText;"true"==t?(window.alert("selected user deleted succesfully!"),document.location.reload()):window.alert("operation failed."),closeHoldon()}};var t="requestType="+XHTTP_REQUEST_TYPE_REMOVEUSER+"&un="+selectedUser;e.open("POST","datamodel/xhttpHandler.php"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),openHoldon()}function removeSelectedDepartment(){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.responseText;"true"==t||"1"==t?(window.alert("selected Department deleted succesfully!"),document.location.reload()):"false"==t||"0"==t?window.alert("operation failed."):window.alert("Error removing dpt:"+t),closeHoldon()}};var t="requestType="+XHTTP_REQUEST_TYPE_REMOVEDEPARTMENT+"&dpt="+selectedDpt;e.open("POST","datamodel/xhttpHandler.php"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(t),openHoldon()}function validateThis(e){}function removeSelectedSec(){if("1"==activeSecElement.getAttribute("value"))return void window.alert("You can't remove this section.");var e=window.confirm("Are you sure you want to remove the selected section?");e&&(activeYosElement.removeChild(activeSecElement),saveChanges(),document.location.reload())}function removeSelectedYOS(){if("1"==activeYosElement.getAttribute("value"))return void window.alert("You can't remove First year Schedule");var e=window.confirm("Are you sure you want to remove all the year "+activeYosElement.getAttribute("value")+" schedules?");e&&(activeYosElement.parentNode.removeChild(activeYosElement),saveChanges(),document.location.reload())}function removeInstructor(e){var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var n=t.responseText;"true"==n||"1"==n?(window.alert(e+" removed from the system succesfully!"),showInstructorsList()):"false"==n||"0"==n?window.alert("operation failed."):window.alert("Error removing instructor:"+n)}};var n="requestType="+XHTTP_REQUEST_TYPE_REMOVEINSTRUCTOR+"&iname="+e;t.open("POST","datamodel/xhttpHandler.php"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(n)}function removeCourse(e,t){var n;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;"true"==e||"1"==e?(window.alert(t+" removed from the system succesfully!"),showCoursesList()):"false"==e||"0"==e?window.alert("operation failed."):window.alert("Error removing course:"+e)}};var a="requestType="+XHTTP_REQUEST_TYPE_REMOVECOURSE+"&yos="+e+"&ctitle="+t;n.open("POST","datamodel/xhttpHandler.php"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a)}function addNewInstructor(e,t){var n=document.getElementById("nin");if(0==n.checkValidity())return void $("#nin").attr("placeholder",n.validationMessage);var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var n=a.responseText;"true"==n||"1"==n?(window.alert(e+" "+t+" added to the system succesfully!"),$("#nin").val(""),showInstructorsList()):"false"==n||"0"==n?window.alert("operation failed."):window.alert("Error adding new instructor:"+n)}};var o="requestType="+XHTTP_REQUEST_TYPE_ADDINSTRUCTOR+"&title="+e+"&iname="+t;a.open("POST","datamodel/xhttpHandler.php"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(o)}function addNewCourse(e,t){var n=document.getElementById("nct"),a=document.getElementById("ncyos");if(0==n.checkValidity())return void $("#nct").attr("placeholder",n.validationMessage);if(0==a.checkValidity())return void $("#ncyos").attr("placeholder",a.validationMessage);var o;o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=o.responseText;"true"==e||"1"==e?($("#nct").val(""),window.alert(t+" added to the system succesfully!"),showCoursesList()):"false"==e||"0"==e?window.alert("operation failed."):window.alert("Error adding new course:"+e)}};var r="requestType="+XHTTP_REQUEST_TYPE_ADDCOURSE+"&yos="+e+"&ctitle="+t;o.open("POST","datamodel/xhttpHandler.php"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(r)}function showInstructorsList(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.responseText;$(document).ready(function(){document.getElementById("instList").innerHTML=t})}};var t="requestType="+XHTTP_REQUEST_TYPE_GETINSTRUCTORS+"&dpt="+user.userDepartment;e.open("GET","datamodel/xhttpHandler.php?"+t),e.send()}function showCoursesList(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=e.responseText;$(document).ready(function(){document.getElementById("corsList").innerHTML=t})}};var t="requestType="+XHTTP_REQUEST_TYPE_GETCOURSES+"&dpt="+user.userDepartment;e.open("GET","datamodel/xhttpHandler.php?"+t),e.send()}function showClassInfo(){if("undefined"!=typeof activeSecElement&&null!=activeSecElement){var e=activeDepartment+" - year "+activeYosElement.getAttribute("value")+" - sec "+activeSecElement.getAttribute("value");$("#infotitle").text(e);var t=activeSecElement.getElementsByTagName("advisor")[0].childNodes[0].nodeValue,n=activeSecElement.getElementsByTagName("advisor")[0].getAttribute("phone"),a=activeSecElement.getElementsByTagName("rep")[0].childNodes[0].nodeValue,o=activeSecElement.getElementsByTagName("rep")[0].getAttribute("phone");$("#advisorName").val(t),""==n?$("#advisorPhone").attr("placeholder","advisor phone unknown!"):$("#advisorPhone").val(n),$("#repName").val(a),""==o?$("#repPhone").attr("placeholder","rep phone unknown!"):$("#repPhone").val(o)}}function saveClassInfo(e,t,n,a){(null==e||""==e)&&(e="unknown"),(null==n||""==n)&&(n="unknown");var o=document.getElementById("advisorPhone"),r=document.getElementById("repPhone");return 0==o.checkValidity()?void $("#advisorPhone").attr("placeholder",o.validationMessage):0==r.checkValidity()?void $("#repPhone").attr("placeholder",r.validationMessage):t.length<10&&t.length>0?void $("#advisorPhone").attr("placeholder","phone number need to be at least 10 digits"):a.length<10&&a.length>0?void $("#repPhone").attr("placeholder","phone number need to be at least 10 digits"):(activeSecElement.getElementsByTagName("advisor")[0].childNodes[0].nodeValue=e,activeSecElement.getElementsByTagName("advisor")[0].setAttribute("phone",t),activeSecElement.getElementsByTagName("rep")[0].childNodes[0].nodeValue=n,activeSecElement.getElementsByTagName("rep")[0].setAttribute("phone",a),void saveChanges())}function openHoldon(){HoldOn.open({theme:"sk-cube-circle",backgroundColor:"#1847B1",message:"wait...",textColor:"white"})}function closeHoldon(){HoldOn.close()}var xmlDoc,activeDepartment,activeYosElement,activeSecElement,activeDayElement,activePrdElement,activeSecTab,activeDayTab,activePrdTab,user={userName:"",usertype:0,userDepartment:""},selectedUser,selectedDpt,madeChanges=!1,scheduleChanged=!1,USER_TYPE_NORMAL=3,USER_TYPE_SCHEDULER=2,USER_TYPE_ADMIN=1,PERIOD_1_T="2:10 - 4:00",PERIOD_2_T="4:10 - 6:00",PERIOD_3_T="8:00 - 10:50",XHTTP_REQUEST_TYPE_USERINFO=1,XHTTP_REQUEST_TYPE_DPTSCHEDULE=2,XHTTP_REQUEST_TYPE_AUTHENTICATE=3,XHTTP_REQUEST_TYPE_LOGOUT=4,XHTTP_REQUEST_TYPE_SELECTDEPARTMENT=5,XHTTP_REQUEST_TYPE_CHANGEPW=6,XHTTP_REQUEST_TYPE_GETUSERS=7,XHTTP_REQUEST_TYPE_ADDUSER=8,XHTTP_REQUEST_TYPE_GETDEPARTMENTS=9,XHTTP_REQUEST_TYPE_REMOVEUSER=10,XHTTP_REQUEST_TYPE_GETDEPARTMENTS_FORADMIN=11,XHTTP_REQUEST_TYPE_ADDDEPARTMENT=12,XHTTP_REQUEST_TYPE_REMOVEDEPARTMENT=13,XHTTP_REQUEST_TYPE_GETINSTRUCTORS=14,XHTTP_REQUEST_TYPE_ADDINSTRUCTOR=15,XHTTP_REQUEST_TYPE_REMOVEINSTRUCTOR=16,XHTTP_REQUEST_TYPE_GETCOURSES=17,XHTTP_REQUEST_TYPE_ADDCOURSE=18,XHTTP_REQUEST_TYPE_REMOVECOURSE=19;